version: '3.4'

services:

  dataanalyticsplatform.service.masterapi:
    image: dataanalyticsplatformservicemasterapi
    build:
      context: .
      dockerfile: DataAnalyticsPlatform.Service.MasterAPI/Dockerfile
    ports:
      - "2551:2551"
    
    environment:
      ACTORSYSTEM: "dap-actor-system"
      # The cluster IP (bit of a misnomer, here it's the hostname) is derived from the service name (lighthouse)
      CLUSTER_IP: dataanalyticsplatform.service.masterapi
      CLUSTER_PORT: 2551

      CLUSTER_SEEDS: "akka.tcp://dap-actor-system@localhost:2551"

  loadserviceapi:
    image: loadserviceapi
    build:
      context: .
      dockerfile: LoadServiceApi/LoadServiceApi/Dockerfile
    depends_on:
    - dataanalyticsplatform.service.masterapi  
  
  dataanalyticsplatform.service.worker:
    image: dataanalyticsplatformserviceworker
    build:
      context: .
      dockerfile: DataAnalyticsPlatform.Service.Worker/Dockerfile
    depends_on:
    - dataanalyticsplatform.service.masterapi

 
